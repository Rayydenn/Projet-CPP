#include "Client.h"

using namespace carconfig;

/////////////////////////////////////////////////////////////////////////////////////////////////////
/*									CONSTRUCTEURS									*/
/////////////////////////////////////////////////////////////////////////////////////////////////////

Client::Client():Actor()
{
	Gsm = "";
}

Client::Client(string nom, string prenom, int id, string tel):Actor(id,nom,prenom)
{
	Gsm = tel;
}

Client::Client(const Client& source):Actor(source)
{
	Gsm = source.Gsm;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////
/*									SETTERS									*/
/////////////////////////////////////////////////////////////////////////////////////////////////////

void Client::setGsm(string tel)
{
	Gsm = tel;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////
/*									GETTERS									*/
/////////////////////////////////////////////////////////////////////////////////////////////////////

string Client::getGsm() const
{
	return Gsm;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////
/*									TUPLE/TOSTRING									*/
/////////////////////////////////////////////////////////////////////////////////////////////////////

string Client::toString() const {
    return "[C" + std::to_string(Id) + "] " + lastName + " " + firstName + " " + Gsm;
}

string Client::tuple() const {
    return std::to_string(Id) + ";" + lastName + ";" + firstName + ";" + Gsm;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////
/*									OPERATEURS									*/
/////////////////////////////////////////////////////////////////////////////////////////////////////

namespace carconfig
{
	ostream& operator<<(ostream& os, const Client& c)
	{
		os << "<Client>" << endl;
		os << static_cast<const Actor&>(c);
		os << static_cast<const Person&>(c);
		os << "<Gsm>" << endl;
		os << c.getGsm() << endl;
		os << "</Gsm>" << endl;
		os << "</Client>" << endl;

		return os;
	}

	istream& operator>>(istream& is, Client& c)
	{
		string line;


		getline(is, line);
		is >> static_cast<Actor&>(c);
		is >> static_cast<Person&>(c);
		getline(is, line);
		getline(is, line);
		c.setGsm(line);
		getline(is, line);
		getline(is, line);

		return is;
	}
}